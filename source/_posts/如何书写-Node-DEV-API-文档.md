---
title: 'å¦‚ä½•ä¹¦å†™ Node DEV API æ–‡æ¡£ '
date: 2019-04-16 17:02:20
tags: 
  - Node.js
  - Swagger Doc
---

## ä¸ºä»€ä¹ˆéœ€è¦ API æ–‡æ¡£
ç›®å‰å¤§çš„ç¯å¢ƒä¸‹é¢ï¼ŒåŸºæœ¬æœåŠ¡éƒ½ä»¥å•ä½“æœåŠ¡è½¬æ¢æˆå‰åç«¯åˆ†ç¦»çš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯ä½œä¸ºè°ƒç”¨æ–¹ï¼ŒæœåŠ¡ç«¯ä½œä¸ºæä¾›æ–¹éœ€è¦ç»™äºˆåˆ°è°ƒç”¨æ–¹é€šä¿—æ˜“æ‡‚çš„æ–‡æ¡£ã€‚
## å¸¸è§ API æ–‡æ¡£æœ‰å“ªäº›
1. [gitbook](https://github.com/GitbookIO/gitbook)
>Â Modern documentation format and toolchain using Git and MarkdownÂ 

![å›¾ç‰‡](https://uploader.shimo.im/f/45J30B4D0d4L7CWC.png!thumbnail)
* [Usage](https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md)
* ä¼˜ç‚¹ï¼š
  * ç±»ä¼¼ä¹¦ç±çš„ç®¡ç†æ–¹å¼ï¼ˆé€‚åˆå†™ä¹¦ï¼‰
  * æ”¯æŒå¤šäººåä½œï¼Œæ”¯æŒä¿å­˜åœ¨ Github ä¸­
  * æ”¯æŒ Build æˆé™æ€ç½‘é¡µï¼Œéƒ¨ç½²æ–¹ä¾¿
* ç¼ºç‚¹ï¼š
  * éœ€è¦ç†Ÿæ‚‰ **Markdown **è¯­æ³•ï¼Œä¸æ˜¯å®æ—¶ç”Ÿæˆï¼Œéœ€è¦ä½¿ç”¨ [Git-cli](https://github.com/GitbookIO/gitbook-cli) æ‰“åŒ…æ–‡ä»¶
  * ä»¥ä¸€æœ¬ä¹¦ç±ä½œä¸ºèµ·ç‚¹ï¼Œåªèƒ½æ”¾åˆ°å•ä¸ªé¡¹ç›®ä¸­
* æ€»ç»“ï¼šé€‚åˆå†™ä¹¦ç±ï¼Œä¸å¤ªé€‚åˆ API å¼€å‘æ–‡æ¡£

2. [jsdoc](https://github.com/jsdoc3/jsdoc)
>An API documentation generator for JavaScript.

![å›¾ç‰‡](https://uploader.shimo.im/f/UyoiKuM54H08ylGa.png!thumbnail)
* [Usage](http://usejsdoc.org/)
* ä¼˜ç‚¹ï¼š
  * åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒå¼•å…¥å—çŠ¶æ³¨é‡Šï¼ˆ[Block Tags](https://www.html.cn/doc/jsdoc/tags-example.html)ï¼‰
  * åŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒå†…è”æ³¨é‡Šï¼ˆ[Inline Tags](https://www.html.cn/doc/jsdoc/tags-inline-link.html)ï¼‰
  * å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒï¼Œå„ä¸ªå¹³å°æ”¯æŒ jsdocs æ’ä»¶
* ç¼ºç‚¹ï¼š
  * æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼Œéœ€è¦å­¦ä¹ å®ƒçš„å—çŠ¶æ³¨é‡Šä½¿ç”¨æ–¹å¼
  * UI åªèƒ½å•é¡¹ç›®ä½¿ç”¨ï¼Œæ¯ä¸ªé¡¹ç›®çš„ DOC UI ç‹¬ç«‹ 
* åœ¨çº¿æ ·ä¾‹ï¼ˆ[b](https://github.com/SoftwareBrothers/better-docs)[etter-](https://softwarebrothers.github.io/admin-bro-dev/index.html)[d](https://github.com/SoftwareBrothers/better-docs)[ocs](https://github.com/SoftwareBrothers/better-docs) [tui-jsdoc-template](https://nhnent.github.io/tui.jsdoc-template/latest/))
* æ€»ç»“ï¼šé€‚åˆæ·±åº¦å®šåˆ¶é¡¹ç›®ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å¯¹å¤–å¼€æ”¾ API ç»™å¼€å‘è€…ä½¿ç”¨ã€‚

3. [swagger-jsdoc](https://github.com/Surnet/swagger-jsdoc)
>Generates swagger doc based on JSDoc.

![å›¾ç‰‡](https://uploader.shimo.im/f/fHtWq6Xh6gcnZNZm.png!thumbnail)
* [Usage](https://github.com/Surnet/swagger-jsdoc/tree/master/example/v2)
* ä¼˜ç‚¹ï¼š
  * é›†åˆ Swaggerï¼Œæ”¯æŒæŒ‰ç…§ç±»ä¼¼ JSDoc æ–¹å¼ç”Ÿæˆæ–‡æ¡£
  * æ”¯æŒé”™è¯¯å®šä½ï¼Œå¦‚æœæ³¨é‡Šä¹¦å†™é”™è¯¯ï¼Œèƒ½å¤ŸæŠ›å‡ºå…·ä½“çš„é”™è¯¯æ ˆ
  * æ”¯æŒ [CLI](https://github.com/Surnet/swagger-jsdoc/blob/master/docs/CLI.md)ï¼Œè‡ªç”±é€‰æ‹©æ–‡ä»¶è¾“å‡ºä½ç½®
* ç¼ºç‚¹ï¼š
  * ä¹¦å†™æ ¼å¼ä¸å‹å¥½ï¼Œå¼ºæ ¼å¼è¦æ±‚ï¼Œå¯¹äºæ–°æ‰‹æ¥è¯´ä¸å®¹æ˜“ä¸Šæ‰‹ï¼Œå®˜æ–¹æ ·ä¾‹è¾ƒå°‘ï¼Œå¾ˆå¤šè¯­æ³•éœ€è¦å¯¹äº Swagger YAML æ ¼å¼ï¼Œè‡ªå·±ç†è§£è¿›è¡Œæ˜ å°„
  * æ²¡æœ‰èƒ½å¤Ÿå®Œæˆå®‰è£… JSDoc æ ¼å¼æ¥ä¹¦å†™æ³¨é‡Šï¼Œæ›´å€¾å‘äº YAML æ–‡ä»¶

4. [doc-generators](https://github.com/SensitiveMix/doc-generators)
>simple generator handler for swagger
```
/**
 * @typedef Product
 * @property {integer} id
 * @property {string} name.required - Some description for product
 * @property {Array.<Point>} Point
 */

/**
 * This function comment is parsed by doctrine
 * sdfkjsldfkj
 * @route POST /users
 * @param {Point.model} point.body.required - the new point
 * @group foo - Operations about user
 * @param {string} email.query.required - username or email
 * @param {string} password.query.required - user's password.
 * @param {enum} status.query.required - Status values that need to be considered for filter - eg: available,pending
 * @operationId retrieveFooInfo
 * @produces application/json application/xml
 * @consumes application/json application/xml
 * @returns {Response.model} 200 - An array of user info
 * @returns {Product.model}  default - Unexpected error
 * @returns {Array.<Point>} Point - Some description for point
 * @headers {integer} 200.X-Rate-Limit - calls per hour allowed by the user
 * @headers {string} 200.X-Expires-After - 	date in UTC when token expires
 * @security JWT
 */
```

* [Usage](https://github.com/SensitiveMix/doc-generators/blob/master/example/router.js)
* ä¼˜ç‚¹ï¼š
  * æ”¯æŒé›†æˆ Swaggerï¼Œæ”¯æŒæŒ‰ç…§ç±»ä¼¼ JSDoc æ–¹å¼ç”Ÿæˆæ–‡æ¡£
  * å‹å¥½çš„æ–‡æ¡£çš„æ³¨é‡Šï¼Œè´´åˆ IDE å‡½æ•°æ³¨é‡Š
* ç¼ºç‚¹ï¼š
  * å®ç°å¯ç”¨çš„åŸºç¡€ä¸Šï¼Œéœ€è¦æ”¯æŒåˆ° IDEï¼Œæ–¹ä¾¿ä¸€é”®ç”Ÿæˆï¼Œæ”¯æŒè‡ªåŠ¨åŒ–
## Example
```
/**
 * verify quarantine site
 * @route POST /ui/quarantine/v1/verify_od_dedicated_quarantine_site
 * @group quarantine
 * @param {QuarantineJSON.model} body.body.required - post body
 * @returns {object} 200 - An array of handler info
 * @returns {Error} 400 - invalid site
 * @returns {Error} 500 - internal error
 */
/**
 * JSON parameters require a model. This one just has "name"
 * @typedef QuarantineJSON
 * @property {string} site.required - quarantine site info
 */
    server.post('/ui/quarantine/v1/verify_od_dedicated_quarantine_site', middleware.other.verifyLoginInfo,
        rbac.quarantine.write, quarantine.verifyOdDedicatedQuarantineSite);
```

```
/**
 * HTTP API statistics
 * @route GET /monit/v1/metric
 * @group monit
 * @param {string} sort.query - asc | desc
 * @param {string} direction.query - count | avarageMillisecondCost | routeName
 * @returns {object} 200 - An array of user info
 * @returns {metrics.model} default - Unexpected error
 */
/**
 * @typedef metrics
 * @property {string} routeName.required - 'getuiadminv1company_plans'
 * @property {number} count.required - route invoke times
 * @property {number} avarageMillisecondCost.required - route avg second cost
 */

server.get("/monit/v1/metric", validator.query({
    type: 'object',
    properties: {
        sort: { type: 'string', enum: ['count'] },
        direction: { type: 'string', enum: ['asc', 'desc'] }
    }
}), monitService.apiMetricHandlers);
```

é¡¹ç›®åœ°å€ï¼š[https://github.com/SensitiveMix/doc-generators](https://github.com/SensitiveMix/doc-generators)
å–œæ¬¢çš„åŒå­¦è¯·ç‚¹ä¸ª Star ğŸ˜†
